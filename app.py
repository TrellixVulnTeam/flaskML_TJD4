from flask import Flask, request
from EmotionPredictor import EmotionPredictorByFacialLandmarks
from utils import utils

app = Flask(__name__)


@app.route('/', methods=['POST', 'GET'])
def predict():
    #npyFLP = utils.convertToNumpyArr(request.form.values())
    npyFLP = utils.convertToNumpyArr("[489,907,486,1040,488,1179,501,1318,544,1434,622,1517,724,1584,827,1633,953,1642,1077,1624,1179,1568,1272,1501,1341,1409,1386,1296,1412,1177,1433,1045,1442,921,577,845,642,782,739,771,832,790,919,828,1055,825,1135,784,1224,760,1312,767,1372,823,979,890,978,970,980,1047,980,1128,850,1168,909,1186,973,1200,1039,1189,1097,1170,672,897,721,870,779,866,832,901,779,911,721,915,1109,894,1158,854,1216,854,1266,879,1219,899,1163,905,759,1362,832,1311,907,1301,965,1311,1023,1298,1086,1306,1146,1352,1087,1397,1026,1422,967,1430,906,1430,828,1409,792,1352,906,1338,966,1341,1024,1336,1115,1347,1027,1359,967,1375,907,1372];[489,907,486,1040,488,1179,501,1318,544,1434,622,1517,724,1584,827,1633,953,1642,1077,1624,1179,1568,1272,1501,1341,1409,1386,1296,1412,1177,1433,1045,1442,921,577,845,642,782,739,771,832,790,919,828,1055,825,1135,784,1224,760,1312,767,1372,823,979,890,978,970,980,1047,980,1128,850,1168,909,1186,973,1200,1039,1189,1097,1170,672,897,721,870,779,866,832,901,779,911,721,915,1109,894,1158,854,1216,854,1266,879,1219,899,1163,905,759,1362,832,1311,907,1301,965,1311,1023,1298,1086,1306,1146,1352,1087,1397,1026,1422,967,1430,906,1430,828,1409,792,1352,906,1338,966,1341,1024,1336,1115,1347,1027,1359,967,1375,907,1372];[489,907,486,1040,488,1179,501,1318,544,1434,622,1517,724,1584,827,1633,953,1642,1077,1624,1179,1568,1272,1501,1341,1409,1386,1296,1412,1177,1433,1045,1442,921,577,845,642,782,739,771,832,790,919,828,1055,825,1135,784,1224,760,1312,767,1372,823,979,890,978,970,980,1047,980,1128,850,1168,909,1186,973,1200,1039,1189,1097,1170,672,897,721,870,779,866,832,901,779,911,721,915,1109,894,1158,854,1216,854,1266,879,1219,899,1163,905,759,1362,832,1311,907,1301,965,1311,1023,1298,1086,1306,1146,1352,1087,1397,1026,1422,967,1430,906,1430,828,1409,792,1352,906,1338,966,1341,1024,1336,1115,1347,1027,1359,967,1375,907,1372];[489,907,486,1040,488,1179,501,1318,544,1434,622,1517,724,1584,827,1633,953,1642,1077,1624,1179,1568,1272,1501,1341,1409,1386,1296,1412,1177,1433,1045,1442,921,577,845,642,782,739,771,832,790,919,828,1055,825,1135,784,1224,760,1312,767,1372,823,979,890,978,970,980,1047,980,1128,850,1168,909,1186,973,1200,1039,1189,1097,1170,672,897,721,870,779,866,832,901,779,911,721,915,1109,894,1158,854,1216,854,1266,879,1219,899,1163,905,759,1362,832,1311,907,1301,965,1311,1023,1298,1086,1306,1146,1352,1087,1397,1026,1422,967,1430,906,1430,828,1409,792,1352,906,1338,966,1341,1024,1336,1115,1347,1027,1359,967,1375,907,1372];[489,907,486,1040,488,1179,501,1318,544,1434,622,1517,724,1584,827,1633,953,1642,1077,1624,1179,1568,1272,1501,1341,1409,1386,1296,1412,1177,1433,1045,1442,921,577,845,642,782,739,771,832,790,919,828,1055,825,1135,784,1224,760,1312,767,1372,823,979,890,978,970,980,1047,980,1128,850,1168,909,1186,973,1200,1039,1189,1097,1170,672,897,721,870,779,866,832,901,779,911,721,915,1109,894,1158,854,1216,854,1266,879,1219,899,1163,905,759,1362,832,1311,907,1301,965,1311,1023,1298,1086,1306,1146,1352,1087,1397,1026,1422,967,1430,906,1430,828,1409,792,1352,906,1338,966,1341,1024,1336,1115,1347,1027,1359,967,1375,907,1372];[489,907,486,1040,488,1179,501,1318,544,1434,622,1517,724,1584,827,1633,953,1642,1077,1624,1179,1568,1272,1501,1341,1409,1386,1296,1412,1177,1433,1045,1442,921,577,845,642,782,739,771,832,790,919,828,1055,825,1135,784,1224,760,1312,767,1372,823,979,890,978,970,980,1047,980,1128,850,1168,909,1186,973,1200,1039,1189,1097,1170,672,897,721,870,779,866,832,901,779,911,721,915,1109,894,1158,854,1216,854,1266,879,1219,899,1163,905,759,1362,832,1311,907,1301,965,1311,1023,1298,1086,1306,1146,1352,1087,1397,1026,1422,967,1430,906,1430,828,1409,792,1352,906,1338,966,1341,1024,1336,1115,1347,1027,1359,967,1375,907,1372];[489,907,486,1040,488,1179,501,1318,544,1434,622,1517,724,1584,827,1633,953,1642,1077,1624,1179,1568,1272,1501,1341,1409,1386,1296,1412,1177,1433,1045,1442,921,577,845,642,782,739,771,832,790,919,828,1055,825,1135,784,1224,760,1312,767,1372,823,979,890,978,970,980,1047,980,1128,850,1168,909,1186,973,1200,1039,1189,1097,1170,672,897,721,870,779,866,832,901,779,911,721,915,1109,894,1158,854,1216,854,1266,879,1219,899,1163,905,759,1362,832,1311,907,1301,965,1311,1023,1298,1086,1306,1146,1352,1087,1397,1026,1422,967,1430,906,1430,828,1409,792,1352,906,1338,966,1341,1024,1336,1115,1347,1027,1359,967,1375,907,1372];[489,907,486,1040,488,1179,501,1318,544,1434,622,1517,724,1584,827,1633,953,1642,1077,1624,1179,1568,1272,1501,1341,1409,1386,1296,1412,1177,1433,1045,1442,921,577,845,642,782,739,771,832,790,919,828,1055,825,1135,784,1224,760,1312,767,1372,823,979,890,978,970,980,1047,980,1128,850,1168,909,1186,973,1200,1039,1189,1097,1170,672,897,721,870,779,866,832,901,779,911,721,915,1109,894,1158,854,1216,854,1266,879,1219,899,1163,905,759,1362,832,1311,907,1301,965,1311,1023,1298,1086,1306,1146,1352,1087,1397,1026,1422,967,1430,906,1430,828,1409,792,1352,906,1338,966,1341,1024,1336,1115,1347,1027,1359,967,1375,907,1372];[489,907,486,1040,488,1179,501,1318,544,1434,622,1517,724,1584,827,1633,953,1642,1077,1624,1179,1568,1272,1501,1341,1409,1386,1296,1412,1177,1433,1045,1442,921,577,845,642,782,739,771,832,790,919,828,1055,825,1135,784,1224,760,1312,767,1372,823,979,890,978,970,980,1047,980,1128,850,1168,909,1186,973,1200,1039,1189,1097,1170,672,897,721,870,779,866,832,901,779,911,721,915,1109,894,1158,854,1216,854,1266,879,1219,899,1163,905,759,1362,832,1311,907,1301,965,1311,1023,1298,1086,1306,1146,1352,1087,1397,1026,1422,967,1430,906,1430,828,1409,792,1352,906,1338,966,1341,1024,1336,1115,1347,1027,1359,967,1375,907,1372];[489,907,486,1040,488,1179,501,1318,544,1434,622,1517,724,1584,827,1633,953,1642,1077,1624,1179,1568,1272,1501,1341,1409,1386,1296,1412,1177,1433,1045,1442,921,577,845,642,782,739,771,832,790,919,828,1055,825,1135,784,1224,760,1312,767,1372,823,979,890,978,970,980,1047,980,1128,850,1168,909,1186,973,1200,1039,1189,1097,1170,672,897,721,870,779,866,832,901,779,911,721,915,1109,894,1158,854,1216,854,1266,879,1219,899,1163,905,759,1362,832,1311,907,1301,965,1311,1023,1298,1086,1306,1146,1352,1087,1397,1026,1422,967,1430,906,1430,828,1409,792,1352,906,1338,966,1341,1024,1336,1115,1347,1027,1359,967,1375,907,1372];[489,907,486,1040,488,1179,501,1318,544,1434,622,1517,724,1584,827,1633,953,1642,1077,1624,1179,1568,1272,1501,1341,1409,1386,1296,1412,1177,1433,1045,1442,921,577,845,642,782,739,771,832,790,919,828,1055,825,1135,784,1224,760,1312,767,1372,823,979,890,978,970,980,1047,980,1128,850,1168,909,1186,973,1200,1039,1189,1097,1170,672,897,721,870,779,866,832,901,779,911,721,915,1109,894,1158,854,1216,854,1266,879,1219,899,1163,905,759,1362,832,1311,907,1301,965,1311,1023,1298,1086,1306,1146,1352,1087,1397,1026,1422,967,1430,906,1430,828,1409,792,1352,906,1338,966,1341,1024,1336,1115,1347,1027,1359,967,1375,907,1372];[489,907,486,1040,488,1179,501,1318,544,1434,622,1517,724,1584,827,1633,953,1642,1077,1624,1179,1568,1272,1501,1341,1409,1386,1296,1412,1177,1433,1045,1442,921,577,845,642,782,739,771,832,790,919,828,1055,825,1135,784,1224,760,1312,767,1372,823,979,890,978,970,980,1047,980,1128,850,1168,909,1186,973,1200,1039,1189,1097,1170,672,897,721,870,779,866,832,901,779,911,721,915,1109,894,1158,854,1216,854,1266,879,1219,899,1163,905,759,1362,832,1311,907,1301,965,1311,1023,1298,1086,1306,1146,1352,1087,1397,1026,1422,967,1430,906,1430,828,1409,792,1352,906,1338,966,1341,1024,1336,1115,1347,1027,1359,967,1375,907,1372];[489,907,486,1040,488,1179,501,1318,544,1434,622,1517,724,1584,827,1633,953,1642,1077,1624,1179,1568,1272,1501,1341,1409,1386,1296,1412,1177,1433,1045,1442,921,577,845,642,782,739,771,832,790,919,828,1055,825,1135,784,1224,760,1312,767,1372,823,979,890,978,970,980,1047,980,1128,850,1168,909,1186,973,1200,1039,1189,1097,1170,672,897,721,870,779,866,832,901,779,911,721,915,1109,894,1158,854,1216,854,1266,879,1219,899,1163,905,759,1362,832,1311,907,1301,965,1311,1023,1298,1086,1306,1146,1352,1087,1397,1026,1422,967,1430,906,1430,828,1409,792,1352,906,1338,966,1341,1024,1336,1115,1347,1027,1359,967,1375,907,1372];[489,907,486,1040,488,1179,501,1318,544,1434,622,1517,724,1584,827,1633,953,1642,1077,1624,1179,1568,1272,1501,1341,1409,1386,1296,1412,1177,1433,1045,1442,921,577,845,642,782,739,771,832,790,919,828,1055,825,1135,784,1224,760,1312,767,1372,823,979,890,978,970,980,1047,980,1128,850,1168,909,1186,973,1200,1039,1189,1097,1170,672,897,721,870,779,866,832,901,779,911,721,915,1109,894,1158,854,1216,854,1266,879,1219,899,1163,905,759,1362,832,1311,907,1301,965,1311,1023,1298,1086,1306,1146,1352,1087,1397,1026,1422,967,1430,906,1430,828,1409,792,1352,906,1338,966,1341,1024,1336,1115,1347,1027,1359,967,1375,907,1372];[489,907,486,1040,488,1179,501,1318,544,1434,622,1517,724,1584,827,1633,953,1642,1077,1624,1179,1568,1272,1501,1341,1409,1386,1296,1412,1177,1433,1045,1442,921,577,845,642,782,739,771,832,790,919,828,1055,825,1135,784,1224,760,1312,767,1372,823,979,890,978,970,980,1047,980,1128,850,1168,909,1186,973,1200,1039,1189,1097,1170,672,897,721,870,779,866,832,901,779,911,721,915,1109,894,1158,854,1216,854,1266,879,1219,899,1163,905,759,1362,832,1311,907,1301,965,1311,1023,1298,1086,1306,1146,1352,1087,1397,1026,1422,967,1430,906,1430,828,1409,792,1352,906,1338,966,1341,1024,1336,1115,1347,1027,1359,967,1375,907,1372];[489,907,486,1040,488,1179,501,1318,544,1434,622,1517,724,1584,827,1633,953,1642,1077,1624,1179,1568,1272,1501,1341,1409,1386,1296,1412,1177,1433,1045,1442,921,577,845,642,782,739,771,832,790,919,828,1055,825,1135,784,1224,760,1312,767,1372,823,979,890,978,970,980,1047,980,1128,850,1168,909,1186,973,1200,1039,1189,1097,1170,672,897,721,870,779,866,832,901,779,911,721,915,1109,894,1158,854,1216,854,1266,879,1219,899,1163,905,759,1362,832,1311,907,1301,965,1311,1023,1298,1086,1306,1146,1352,1087,1397,1026,1422,967,1430,906,1430,828,1409,792,1352,906,1338,966,1341,1024,1336,1115,1347,1027,1359,967,1375,907,1372];[489,907,486,1040,488,1179,501,1318,544,1434,622,1517,724,1584,827,1633,953,1642,1077,1624,1179,1568,1272,1501,1341,1409,1386,1296,1412,1177,1433,1045,1442,921,577,845,642,782,739,771,832,790,919,828,1055,825,1135,784,1224,760,1312,767,1372,823,979,890,978,970,980,1047,980,1128,850,1168,909,1186,973,1200,1039,1189,1097,1170,672,897,721,870,779,866,832,901,779,911,721,915,1109,894,1158,854,1216,854,1266,879,1219,899,1163,905,759,1362,832,1311,907,1301,965,1311,1023,1298,1086,1306,1146,1352,1087,1397,1026,1422,967,1430,906,1430,828,1409,792,1352,906,1338,966,1341,1024,1336,1115,1347,1027,1359,967,1375,907,1372];[489,907,486,1040,488,1179,501,1318,544,1434,622,1517,724,1584,827,1633,953,1642,1077,1624,1179,1568,1272,1501,1341,1409,1386,1296,1412,1177,1433,1045,1442,921,577,845,642,782,739,771,832,790,919,828,1055,825,1135,784,1224,760,1312,767,1372,823,979,890,978,970,980,1047,980,1128,850,1168,909,1186,973,1200,1039,1189,1097,1170,672,897,721,870,779,866,832,901,779,911,721,915,1109,894,1158,854,1216,854,1266,879,1219,899,1163,905,759,1362,832,1311,907,1301,965,1311,1023,1298,1086,1306,1146,1352,1087,1397,1026,1422,967,1430,906,1430,828,1409,792,1352,906,1338,966,1341,1024,1336,1115,1347,1027,1359,967,1375,907,1372];[489,907,486,1040,488,1179,501,1318,544,1434,622,1517,724,1584,827,1633,953,1642,1077,1624,1179,1568,1272,1501,1341,1409,1386,1296,1412,1177,1433,1045,1442,921,577,845,642,782,739,771,832,790,919,828,1055,825,1135,784,1224,760,1312,767,1372,823,979,890,978,970,980,1047,980,1128,850,1168,909,1186,973,1200,1039,1189,1097,1170,672,897,721,870,779,866,832,901,779,911,721,915,1109,894,1158,854,1216,854,1266,879,1219,899,1163,905,759,1362,832,1311,907,1301,965,1311,1023,1298,1086,1306,1146,1352,1087,1397,1026,1422,967,1430,906,1430,828,1409,792,1352,906,1338,966,1341,1024,1336,1115,1347,1027,1359,967,1375,907,1372];[489,907,486,1040,488,1179,501,1318,544,1434,622,1517,724,1584,827,1633,953,1642,1077,1624,1179,1568,1272,1501,1341,1409,1386,1296,1412,1177,1433,1045,1442,921,577,845,642,782,739,771,832,790,919,828,1055,825,1135,784,1224,760,1312,767,1372,823,979,890,978,970,980,1047,980,1128,850,1168,909,1186,973,1200,1039,1189,1097,1170,672,897,721,870,779,866,832,901,779,911,721,915,1109,894,1158,854,1216,854,1266,879,1219,899,1163,905,759,1362,832,1311,907,1301,965,1311,1023,1298,1086,1306,1146,1352,1087,1397,1026,1422,967,1430,906,1430,828,1409,792,1352,906,1338,966,1341,1024,1336,1115,1347,1027,1359,967,1375,907,1372]")
    emotionPredictor = EmotionPredictorByFacialLandmarks('./fpModel.pkl')
    prediction = emotionPredictor.predictEmotion(npyFLP)
    predictionList = prediction.tolist()
    t = ' ,'.join(str(n) for n in predictionList)
    print('prediction == ', t)

    return t


if __name__ == '__main__':
    app.run()
